"""
–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Wildberries AI Agent

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
"""

from ai_agent import WildberriesAIAgent


def example_1_basic_usage():
    """–ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ"""
    print("=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞")
    print("=" * 60)
    
    # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    agent = WildberriesAIAgent(API_TOKEN)
    
    # –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    agent.execute("–ü–æ–∫–∞–∂–∏ –≤—Å–µ –º–æ–∏ —Ç–æ–≤–∞—Ä—ã")
    agent.execute("–ö–∞–∫–∞—è –≤—ã—Ä—É—á–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π?")


def example_2_products_management():
    """–ü—Ä–∏–º–µ—Ä 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ —Ü–µ–Ω–∞–º–∏"""
    print("\n" + "=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏")
    print("=" * 60)
    
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    agent = WildberriesAIAgent(API_TOKEN)
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
    agent.execute("–ü–æ–∫–∞–∂–∏ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    # (–∑–∞–º–µ–Ω–∏—Ç–µ 12345 –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π nmID –≤–∞—à–µ–≥–æ —Ç–æ–≤–∞—Ä–∞)
    # agent.execute("–û–±–Ω–æ–≤–∏ —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞ 12345 –Ω–∞ 1500 —Ä—É–±–ª–µ–π")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å—Ç–∞—Ç–∫–∏
    agent.execute("–ü—Ä–æ–≤–µ—Ä—å –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö")
    
    # –ò—â–µ–º —Ç–æ–≤–∞—Ä –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
    # agent.execute("–ù–∞–π–¥–∏ —Ç–æ–≤–∞—Ä 'iPhone 15'")


def example_3_analytics():
    """–ü—Ä–∏–º–µ—Ä 3: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã"""
    print("\n" + "=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 3: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞")
    print("=" * 60)
    
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    agent = WildberriesAIAgent(API_TOKEN)
    
    # –í—ã—Ä—É—á–∫–∞ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã
    agent.execute("–í—ã—Ä—É—á–∫–∞ –∑–∞ 30 –¥–Ω–µ–π")
    agent.execute("–í—ã—Ä—É—á–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é")
    
    # –¢–æ–ø —Ç–æ–≤–∞—Ä–æ–≤
    agent.execute("–¢–æ–ø 10 –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤")
    agent.execute("–¢–æ–ø 5 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é")
    
    # –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
    agent.execute("–ü–æ–∫–∞–∂–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç")


def example_4_advertising():
    """–ü—Ä–∏–º–µ—Ä 4: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–æ–π"""
    print("\n" + "=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 4: –†–µ–∫–ª–∞–º–∞")
    print("=" * 60)
    
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    agent = WildberriesAIAgent(API_TOKEN)
    
    # –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π
    agent.execute("–ü–æ–∫–∞–∂–∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏")
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ 12345 –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID)
    # agent.execute("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏ 12345")
    
    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏—è–º–∏
    # agent.execute("–ó–∞–ø—É—Å—Ç–∏ –∫–∞–º–ø–∞–Ω–∏—é 12345")
    # agent.execute("–û—Å—Ç–∞–Ω–æ–≤–∏ –∫–∞–º–ø–∞–Ω–∏—é 12345")
    # agent.execute("–ò–∑–º–µ–Ω–∏ —Å—Ç–∞–≤–∫—É –∫–∞–º–ø–∞–Ω–∏–∏ 12345 –Ω–∞ 100")


def example_5_direct_managers():
    """–ü—Ä–∏–º–µ—Ä 5: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤"""
    print("\n" + "=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 5: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤")
    print("=" * 60)
    
    from wb_client import WildberriesAPI, WBConfig
    from managers import ProductsManager, AnalyticsManager
    
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    config = WBConfig(api_token=API_TOKEN)
    api = WildberriesAPI(config)
    
    # –†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é
    products = ProductsManager(api)
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
    all_products = products.get_all_products(limit=50)
    print(f"–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: {len(all_products)}")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—ã –º–∞—Å—Å–æ–≤–æ
    price_updates = [
        {"nmID": 12345, "price": 1500, "discount": 10},
        {"nmID": 12346, "price": 2000, "discount": 5},
    ]
    # products.update_multiple_prices(price_updates)
    
    # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–∞–ø—Ä—è–º—É—é
    analytics = AnalyticsManager(api)
    
    # –ü–æ–ª—É—á–∞–µ–º –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–¥–∞–∂–∞—Ö
    sales = analytics.get_sales(date_from="2024-01-01", date_to="2024-01-31")
    print(f"–ü—Ä–æ–¥–∞–∂ –≤ —è–Ω–≤–∞—Ä–µ: {len(sales)}")
    
    # –†–∞—Å—á–µ—Ç –≤—ã—Ä—É—á–∫–∏
    revenue = analytics.calculate_revenue(days=30)
    print(f"–í—ã—Ä—É—á–∫–∞ –∑–∞ 30 –¥–Ω–µ–π: {revenue['total_revenue']}‚ÇΩ")
    
    # –¢–æ–ø —Ç–æ–≤–∞—Ä–æ–≤
    top = analytics.get_top_products(days=30, limit=5)
    print("–¢–æ–ø 5 —Ç–æ–≤–∞—Ä–æ–≤:")
    for i, product in enumerate(top, 1):
        print(f"  {i}. {product['name']} - {product['revenue']}‚ÇΩ")


def example_6_advanced_automation():
    """–ü—Ä–∏–º–µ—Ä 6: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è"""
    print("\n" + "=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 6: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è")
    print("=" * 60)
    
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    agent = WildberriesAIAgent(API_TOKEN)
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
    # –ü—Ä–∏–º–µ—Ä: –ø–æ–≤—ã—Å–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ —Ç–æ–ø–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ 10%
    
    # 1. –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤
    print("\n–®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–æ–ø —Ç–æ–≤–∞—Ä—ã")
    agent.execute("–¢–æ–ø 20 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ 30 –¥–Ω–µ–π")
    top_products = agent.last_result
    
    if top_products:
        print(f"\n–ù–∞–π–¥–µ–Ω–æ {len(top_products)} —Ç–æ–ø–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤")
        
        # 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É
        print("\n–®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ —Ç–æ–ø–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã")
        for product in top_products[:5]:  # –ü–µ—Ä–≤—ã–µ 5
            nm_id = product['nm_id']
            current_revenue = product['revenue']
            print(f"  –¢–æ–≤–∞—Ä {nm_id}: –≤—ã—Ä—É—á–∫–∞ {current_revenue}‚ÇΩ")
            # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã
            # agent.execute(f"–û–±–Ω–æ–≤–∏ —Ü–µ–Ω—É {nm_id} –Ω–∞ {new_price}")
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã
    print("\n–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π")
    agent.execute("–ü–æ–∫–∞–∂–∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏")
    campaigns = agent.last_result
    
    if campaigns:
        print(f"\n–ù–∞–π–¥–µ–Ω–æ {len(campaigns)} –∫–∞–º–ø–∞–Ω–∏–π")
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
        # –∏–ª–∏ –∑–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö


def example_7_suggest_methods():
    """–ü—Ä–∏–º–µ—Ä 7: –ü–æ–∏—Å–∫ –º–µ—Ç–æ–¥–æ–≤ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é"""
    print("\n" + "=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 7: –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ API")
    print("=" * 60)
    
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    agent = WildberriesAIAgent(API_TOKEN)
    
    # –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
    agent.suggest_method("–ø–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–¥–∞–∂–∞—Ö –∑–∞ –º–µ—Å—è—Ü")
    agent.suggest_method("–æ–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ —Ç–æ–≤–∞—Ä—ã")
    agent.suggest_method("–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é")


def example_8_full_analytics_export():
    """–ü—Ä–∏–º–µ—Ä 8: –ü–æ–ª–Ω–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏"""
    print("\n" + "=" * 60)
    print("–ü—Ä–∏–º–µ—Ä 8: –ü–æ–ª–Ω–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏")
    print("=" * 60)
    
    import json
    from datetime import datetime
    
    API_TOKEN = "–≤–∞—à_api_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
    agent = WildberriesAIAgent(API_TOKEN)
    
    print("–í—ã–≥—Ä—É–∂–∞–µ–º –ø–æ–ª–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –º–∞–≥–∞–∑–∏–Ω–∞...\n")
    
    # 1. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞–≥–∞–∑–∏–Ω–µ
    agent.execute("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞–≥–∞–∑–∏–Ω–µ")
    seller_info = agent.last_result
    
    # 2. –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
    agent.execute("–ü–æ–∫–∞–∂–∏ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã")
    products = agent.last_result
    
    # 3. –ü—Ä–æ–¥–∞–∂–∏ –∑–∞ 30 –¥–Ω–µ–π
    agent.execute("–ü—Ä–æ–¥–∞–∂–∏ –∑–∞ 30 –¥–Ω–µ–π")
    sales = agent.last_result
    
    # 4. –í—ã—Ä—É—á–∫–∞
    agent.execute("–í—ã—Ä—É—á–∫–∞ –∑–∞ 30 –¥–Ω–µ–π")
    revenue = agent.last_result
    
    # 5. –¢–æ–ø —Ç–æ–≤–∞—Ä–æ–≤
    agent.execute("–¢–æ–ø 20 —Ç–æ–≤–∞—Ä–æ–≤")
    top_products = agent.last_result
    
    # 6. –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
    agent.execute("–ü–æ–∫–∞–∂–∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏")
    campaigns = agent.last_result
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ JSON
    full_report = {
        "generated_at": datetime.now().isoformat(),
        "seller_info": seller_info,
        "products_count": len(products) if products else 0,
        "sales_count": len(sales) if sales else 0,
        "revenue": revenue,
        "top_products": top_products,
        "campaigns_count": len(campaigns) if campaigns else 0
    }
    
    filename = f"wb_analytics_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
    with open(filename, 'w', encoding='utf-8') as f:
        json.dump(full_report, f, ensure_ascii=False, indent=2)
    
    print(f"\n‚úÖ –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ñ–∞–π–ª: {filename}")
    print(f"üìä –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: {full_report['products_count']}")
    print(f"üì¶ –ü—Ä–æ–¥–∞–∂ –∑–∞ 30 –¥–Ω–µ–π: {full_report['sales_count']}")
    print(f"üí∞ –í—ã—Ä—É—á–∫–∞: {revenue.get('total_revenue', 0)}‚ÇΩ")
    print(f"üì¢ –†–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π: {full_report['campaigns_count']}")


if __name__ == "__main__":
    # –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞
    
    print("""
ü§ñ Wildberries AI Agent - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã:
1. –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏
3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–æ–π
5. –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
6. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
7. –ü–æ–∏—Å–∫ –º–µ—Ç–æ–¥–æ–≤ API
8. –ü–æ–ª–Ω–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤ –∫–æ–¥–µ.
    """)
    
    # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä:
    
    # example_1_basic_usage()
    # example_2_products_management()
    # example_3_analytics()
    # example_4_advertising()
    # example_5_direct_managers()
    # example_6_advanced_automation()
    # example_7_suggest_methods()
    # example_8_full_analytics_export()
